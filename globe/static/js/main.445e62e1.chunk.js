(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){e.exports=n(66)},6:function(e,t,n){e.exports={app:"app_app__cewju",appHeader:"app_appHeader__3YfRd",threeContainer:"app_threeContainer__2B4F2"}},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var i=n(1),o=n.n(i),a=n(16),r=n.n(a),s=n(6),c=n.n(s),h=n(5),u=n(17),d=n(0),l=n(18),m=n.n(l),p=function e(t,n,i,o){var a=this;Object(h.a)(this,e),this.coordinates=void 0,this.touchZoomDistance=void 0,this.drag=void 0,this.zoomIn=void 0,this.zoomOut=void 0,this.zoomStartHandler=function(e){a.isTwoTouches(e)&&(e.preventDefault(),a.touchZoomDistance=Math.hypot(e.touches[0].pageX-e.touches[1].pageX,e.touches[0].pageY-e.touches[1].pageY))},this.zoomMoveHandler=function(e){if(a.isTwoTouches(e)){e.preventDefault();var t=Math.hypot(e.touches[0].pageX-e.touches[1].pageX,e.touches[0].pageY-e.touches[1].pageY),n=t-a.touchZoomDistance;console.log(n),Math.abs(n)>10&&(n<0?a.zoomOut():a.zoomIn(),a.touchZoomDistance=t)}},this.mouseWheelHandler=function(e){e.preventDefault(),Math.max(-1,Math.min(1,-e.deltaY))<0&&a.zoomOut?a.zoomOut():a.zoomIn&&a.zoomIn()},this.getCoordinates=function(e){return e instanceof MouseEvent?{x:e.clientX,y:e.clientY}:{x:e.touches[0].pageX,y:e.touches[0].pageY}},this.downHandler=function(e){if(!a.isTwoTouches(e)){e.preventDefault();var t=a.getCoordinates(e),n=t.x,i=t.y;a.coordinates={startX:n,startY:i,currentX:n,currentY:i}}},this.moveHandler=function(e){if(!a.isTwoTouches(e)){e.preventDefault();var t=a.getCoordinates(e),n=t.x,i=t.y;a.isInteractionStarted(a.coordinates)&&(a.drag&&a.drag(n-a.coordinates.currentX,i-a.coordinates.currentY),a.coordinates.currentX=n,a.coordinates.currentY=i)}},this.endHandler=function(e){e.preventDefault(),a.coordinates=null,a.touchZoomDistance=0},this.isInteractionStarted=function(e){return!!e},this.isTwoTouches=function(e){return 2===m()(e,"touches.length")},this.coordinates=null,this.touchZoomDistance=0,this.drag=n,this.zoomIn=i,this.zoomOut=o,t.addEventListener("wheel",this.mouseWheelHandler),t.addEventListener("mousedown",this.downHandler),t.addEventListener("mousemove",this.moveHandler),t.addEventListener("mouseup",this.endHandler),t.addEventListener("touchstart",this.downHandler),t.addEventListener("touchmove",this.moveHandler),t.addEventListener("touchend",this.endHandler),t.addEventListener("touchstart",this.zoomStartHandler),t.addEventListener("touchmove",this.zoomMoveHandler)},v=function(){function e(t){Object(h.a)(this,e),this.container=void 0,this.controls=void 0,this.renderer=void 0,this.scene=void 0,this.camera=void 0,this.center=void 0,this.globe=void 0,this.clouds=void 0,this.container=t,this.renderer=this.initRenderer(t),this.scene=this.initScene(),this.camera=this.initCamera(),this.center=this.initCenter(),this.camera.lookAt(this.center);var n=this.initAmbientLight();this.scene.add(n);var i=this.initDirectionalLight();this.scene.add(i),this.globe=this.createGlobe(),this.scene.add(this.globe),this.clouds=this.createClouds(),this.scene.add(this.clouds);var o=this.initStarField();this.scene.add(o),this.controls=new p(t,this.drag.bind(this),this.zoomIn.bind(this),this.zoomOut.bind(this))}return Object(u.a)(e,[{key:"initRenderer",value:function(e){var t=new d.n;return t.setSize(window.innerWidth,window.innerHeight),e.appendChild(t.domElement),t}},{key:"initScene",value:function(){return new d.j}},{key:"initCamera",value:function(){var e=new d.i(45,window.innerWidth/window.innerHeight,.01,300);return e.up=new d.m(0,0,1),e.position.x=2,e}},{key:"initCenter",value:function(){return new d.m}},{key:"initAmbientLight",value:function(){return new d.a(3355443)}},{key:"initDirectionalLight",value:function(){var e=new d.d(16777215,1);return e.position.set(5,3,5),e}},{key:"createGlobe",value:function(){var e=new d.l;return new d.f(new d.k(.5,32,32).rotateX(d.e.degToRad(90)),new d.h({map:e.load("img/2_no_clouds_4k.jpg"),bumpMap:e.load("img/elev_bump_4k.jpg"),bumpScale:.01,specularMap:e.load("img/water_4k.png"),specular:new d.c("grey")}))}},{key:"createClouds",value:function(){return new d.f(new d.k(.503,32,32).rotateX(d.e.degToRad(90)),new d.h({map:(new d.l).load("img/fair_clouds_4k.png"),transparent:!0}))}},{key:"initStarField",value:function(){return new d.f(new d.k(90,64,64).rotateX(d.e.degToRad(90)),new d.g({map:(new d.l).load("img/galaxy_starfield.png"),side:d.b}))}},{key:"drag",value:function(e,t){var n=Math.PI/450,i=n*e,o=n*t,a=this.camera.position.sub(this.center),r=a.length(),s=Math.acos(a.z/r),c=Math.atan2(a.y,a.x);s=Math.min(Math.max(s-o,0),Math.PI),c-=i,a.x=r*Math.sin(s)*Math.cos(c),a.y=r*Math.sin(s)*Math.sin(c),a.z=r*Math.cos(s),this.camera.position.add(this.center),this.camera.lookAt(this.center)}},{key:"zoomIn",value:function(){this.camera.position.length()>.7&&this.camera.position.sub(this.center).multiplyScalar(.9).add(this.center)}},{key:"zoomOut",value:function(){this.camera.position.length()<5&&this.camera.position.sub(this.center).multiplyScalar(1.1).add(this.center)}},{key:"render",value:function(){var e=this.renderer,t=this.globe,n=this.scene,i=this.camera,o=this.clouds,a=this.container,r=[];r.push(function(e){t.rotateZ(1/32*e)}),r.push(function(e){o.rotateZ(1/24*e)}),window.addEventListener("resize",function(){i.aspect=a.clientWidth/a.clientHeight,i.updateProjectionMatrix(),e.setSize(a.clientWidth,a.clientHeight)}),r.push(function(){e.render(n,i)});var s=null;requestAnimationFrame(function e(t){s=s||t-1e3/60;var n=Math.min(200,t-s);s=t,r.forEach(function(e){e(n/1e3,t/1e3)}),requestAnimationFrame(e)})}}]),e}();var f=function(){var e=function(){var e=Object(i.useRef)(null);return Object(i.useEffect)(function(){e.current&&new v(e.current).render()}),e}();return o.a.createElement("div",{className:c.a.app},o.a.createElement("header",{className:c.a.appHeader},"CLEAN PLANET"),o.a.createElement("main",{className:c.a.threeContainer,ref:e}),o.a.createElement("footer",null,"\xa9 Anton Chernov 2019"))};n(65),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[19,1,2]]]);
//# sourceMappingURL=main.445e62e1.chunk.js.map