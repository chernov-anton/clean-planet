{"version":3,"sources":["components/globe/Controls.ts","components/globe/countryColorMap.ts","components/globe/CountrySelect.ts","components/globe/index.ts","components/globe/Globe.ts","components/globe/vertex.glsl","components/globe/fragment.glsl","App.tsx","serviceWorker.ts","index.tsx","app.module.css"],"names":["Controls","domObject","drag","click","zoomIn","zoomOut","_this","this","Object","classCallCheck","startX","startY","currentX","currentY","mouseWheelHandler","e","preventDefault","Math","max","min","deltaY","mouseDownHandler","clientX","clientY","mouseMoveHandler","mouseUpHandler","clickHandler","abs","addEventListener","bind","colorMap","PE","BF","FR","LY","BY","PK","ID","YE","MG","BO","CI","DZ","CH","CM","MK","BW","UA","KE","TW","JO","MX","AE","BZ","BR","SL","ML","CD","IT","SO","AF","BD","DO","GW","GH","AT","SE","TR","UG","MZ","JP","NZ","CU","VE","PT","CO","MR","AO","DE","SD","TH","AU","PG","IQ","HR","GL","NE","DK","LV","RO","ZM","IR","MM","ET","GT","SR","EH","CZ","TD","AL","FI","SY","KG","SB","OM","PA","AR","GB","CR","PY","GN","IE","NG","TN","PL","NA","ZA","EG","TZ","GE","SA","VN","RU","HT","BA","IN","CN","CA","SV","GY","BE","GQ","LS","BG","BI","DJ","AZ","MY","PH","UY","CG","RS","ME","EE","RW","AM","SN","TG","ES","GA","HU","MW","TJ","KH","KR","HN","IS","NI","CL","MA","LR","NL","CF","SK","LT","ZW","LK","IL","LA","KP","GR","TM","EC","BJ","SI","NO","MD","LB","NP","ER","US","KZ","AQ","SZ","UZ","MN","BT","NC","FJ","KW","TL","BS","VU","FK","GM","QA","JM","CY","PR","PS","BN","TT","CV","PF","WS","LU","KM","MU","FO","ST","AN","DM","TO","KI","FM","BH","AD","MP","PW","SC","AG","BB","TC","VC","LC","YT","VI","GD","MT","MV","KY","KN","MS","BL","NU","PM","CK","WF","AS","MH","AW","LI","VG","SH","JE","AI","MF_1_","GG","SM","BM","TV","NR","GI","PN","MC","VA","IM","GU","SG","CountrySelect","_ref","scene","renderer","mapUniforms","lookupContext","lookupTexture","camera","colorIndex","onCountryClick","x","y","cleanupContext","pickedColorIndex","getPickColor","countryCode","findKey","countryColorMap","countryColorIndex","highlightCountry","highlightOcean","value","clear","render","gl","context","canvas","mouseX","offsetLeft","mouseY","height","offsetTop","buf","Uint8Array","readPixels","RGBA","UNSIGNED_BYTE","clearRect","needsUpdate","ctx","fillStyle","fillRect","Globe","container","center","globe","getRenderer","getScene","getCamera","getCenter","lookAt","ambientLight","getAmbientLight","add","lookupCanvas","getLookupCanvas","getLookupContext","getLookupTexture","getMapUniforms","createGlobe","select","deltaX","radPerPixel","PI","deltaPhi","deltaTheta","pos","position","sub","radius","length","theta","acos","z","phi","atan2","sin","cos","multiplyScalar","renderFuncs","push","delta","rotateZ","window","aspect","clientWidth","clientHeight","updateProjectionMatrix","setSize","lastTimeMsec","requestAnimationFrame","animate","nowMsec","deltaMsec","forEach","renderFunc","THREE","innerWidth","innerHeight","appendChild","domElement","up","document","createElement","width","getContext","Error","magFilter","minFilter","loader","mapTexture","load","mapIndex","type","outline","lookup","outlineLevel","uniforms","planeMaterial","vertexShader","fragmentShader","rotateX","degToRad","App","threeContainer","useRef","useEffect","current","useGlobe","react_default","a","className","style","app","appHeader","ref","Boolean","location","hostname","match","ReactDOM","src_App","getElementById","navigator","serviceWorker","ready","then","registration","unregister","module","exports"],"mappings":"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GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,I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","file":"static/js/main.7cc0d20f.chunk.js","sourcesContent":["interface MouseButtonListener {\n  (x: number, y: number): void;\n}\n\ninterface Zoom {\n  (): void;\n}\n\ntype Coordinate = number | null;\n\nclass Controls {\n  private startX: Coordinate;\n  private startY: Coordinate;\n  private currentX: Coordinate;\n  private currentY: Coordinate;\n  private readonly drag: MouseButtonListener;\n  private readonly click: MouseButtonListener;\n  private readonly zoomIn: Zoom;\n  private readonly zoomOut: Zoom;\n\n  public constructor(\n    domObject: HTMLElement,\n    drag: MouseButtonListener,\n    click: MouseButtonListener,\n    zoomIn: Zoom,\n    zoomOut: Zoom\n  ) {\n    this.startX = null;\n    this.startY = null;\n    this.currentX = null;\n    this.currentY = null;\n    this.drag = drag;\n    this.zoomIn = zoomIn;\n    this.zoomOut = zoomOut;\n    this.click = click;\n\n    domObject.addEventListener('wheel', this.mouseWheelHandler.bind(this));\n    domObject.addEventListener('wheel', this.mouseWheelHandler.bind(this));\n    domObject.addEventListener('mousedown', this.mouseDownHandler.bind(this));\n    domObject.addEventListener('mousemove', this.mouseMoveHandler.bind(this));\n    domObject.addEventListener('mouseup', this.mouseUpHandler.bind(this));\n    domObject.addEventListener('click', this.clickHandler.bind(this));\n  }\n\n  private mouseWheelHandler = (e: WheelEvent): void => {\n    e.preventDefault();\n    let delta = Math.max(-1, Math.min(1, -e.deltaY));\n\n    if (delta < 0 && this.zoomOut) {\n      this.zoomOut();\n    } else if (this.zoomIn) {\n      this.zoomIn();\n    }\n  };\n\n  private mouseDownHandler = (e: MouseEvent): void => {\n    e.preventDefault();\n    this.startX = e.clientX;\n    this.startY = e.clientY;\n    this.currentX = e.clientX;\n    this.currentY = e.clientY;\n  };\n\n  private mouseMoveHandler = (e: MouseEvent): void => {\n    e.preventDefault();\n\n    if (this.currentX === null || this.currentY === null) return;\n\n    if (this.drag) this.drag(e.clientX - this.currentX, e.clientY - this.currentY);\n\n    this.currentX = e.clientX;\n    this.currentY = e.clientY;\n  };\n\n  private mouseUpHandler = (e: MouseEvent): void => {\n    e.preventDefault();\n    this.mouseMoveHandler(e);\n\n    this.currentX = null;\n    this.currentY = null;\n  };\n\n  private clickHandler = (e: MouseEvent): void => {\n    e.preventDefault();\n\n    if (this.startX === null || this.startY === null) return;\n    if (Math.abs(this.startX - e.clientX) > 3 || Math.abs(this.startY - e.clientY) > 3) return;\n\n    if (this.click) this.click(e.clientX, e.clientY);\n\n    this.startX = null;\n    this.startY = null;\n  };\n}\n\nexport default Controls;\n","interface ColorMap {\n  [key: string]: number;\n}\n\nconst colorMap: ColorMap = {\n  PE: 1,\n  BF: 2,\n  FR: 3,\n  LY: 4,\n  BY: 5,\n  PK: 6,\n  ID: 7,\n  YE: 8,\n  MG: 9,\n  BO: 10,\n  CI: 11,\n  DZ: 12,\n  CH: 13,\n  CM: 14,\n  MK: 15,\n  BW: 16,\n  UA: 17,\n  KE: 18,\n  TW: 19,\n  JO: 20,\n  MX: 21,\n  AE: 22,\n  BZ: 23,\n  BR: 24,\n  SL: 25,\n  ML: 26,\n  CD: 27,\n  IT: 28,\n  SO: 29,\n  AF: 30,\n  BD: 31,\n  DO: 32,\n  GW: 33,\n  GH: 34,\n  AT: 35,\n  SE: 36,\n  TR: 37,\n  UG: 38,\n  MZ: 39,\n  JP: 40,\n  NZ: 41,\n  CU: 42,\n  VE: 43,\n  PT: 44,\n  CO: 45,\n  MR: 46,\n  AO: 47,\n  DE: 48,\n  SD: 49,\n  TH: 50,\n  AU: 51,\n  PG: 52,\n  IQ: 53,\n  HR: 54,\n  GL: 55,\n  NE: 56,\n  DK: 57,\n  LV: 58,\n  RO: 59,\n  ZM: 60,\n  IR: 61,\n  MM: 62,\n  ET: 63,\n  GT: 64,\n  SR: 65,\n  EH: 66,\n  CZ: 67,\n  TD: 68,\n  AL: 69,\n  FI: 70,\n  SY: 71,\n  KG: 72,\n  SB: 73,\n  OM: 74,\n  PA: 75,\n  AR: 76,\n  GB: 77,\n  CR: 78,\n  PY: 79,\n  GN: 80,\n  IE: 81,\n  NG: 82,\n  TN: 83,\n  PL: 84,\n  NA: 85,\n  ZA: 86,\n  EG: 87,\n  TZ: 88,\n  GE: 89,\n  SA: 90,\n  VN: 91,\n  RU: 92,\n  HT: 93,\n  BA: 94,\n  IN: 95,\n  CN: 96,\n  CA: 97,\n  SV: 98,\n  GY: 99,\n  BE: 100,\n  GQ: 101,\n  LS: 102,\n  BG: 103,\n  BI: 104,\n  DJ: 105,\n  AZ: 106,\n  MY: 107,\n  PH: 108,\n  UY: 109,\n  CG: 110,\n  RS: 111,\n  ME: 112,\n  EE: 113,\n  RW: 114,\n  AM: 115,\n  SN: 116,\n  TG: 117,\n  ES: 118,\n  GA: 119,\n  HU: 120,\n  MW: 121,\n  TJ: 122,\n  KH: 123,\n  KR: 124,\n  HN: 125,\n  IS: 126,\n  NI: 127,\n  CL: 128,\n  MA: 129,\n  LR: 130,\n  NL: 131,\n  CF: 132,\n  SK: 133,\n  LT: 134,\n  ZW: 135,\n  LK: 136,\n  IL: 137,\n  LA: 138,\n  KP: 139,\n  GR: 140,\n  TM: 141,\n  EC: 142,\n  BJ: 143,\n  SI: 144,\n  NO: 145,\n  MD: 146,\n  LB: 147,\n  NP: 148,\n  ER: 149,\n  US: 150,\n  KZ: 151,\n  AQ: 152,\n  SZ: 153,\n  UZ: 154,\n  MN: 155,\n  BT: 156,\n  NC: 157,\n  FJ: 158,\n  KW: 159,\n  TL: 160,\n  BS: 161,\n  VU: 162,\n  FK: 163,\n  GM: 164,\n  QA: 165,\n  JM: 166,\n  CY: 167,\n  PR: 168,\n  PS: 169,\n  BN: 170,\n  TT: 171,\n  CV: 172,\n  PF: 173,\n  WS: 174,\n  LU: 175,\n  KM: 176,\n  MU: 177,\n  FO: 178,\n  ST: 179,\n  AN: 180,\n  DM: 181,\n  TO: 182,\n  KI: 183,\n  FM: 184,\n  BH: 185,\n  AD: 186,\n  MP: 187,\n  PW: 188,\n  SC: 189,\n  AG: 190,\n  BB: 191,\n  TC: 192,\n  VC: 193,\n  LC: 194,\n  YT: 195,\n  VI: 196,\n  GD: 197,\n  MT: 198,\n  MV: 199,\n  KY: 200,\n  KN: 201,\n  MS: 202,\n  BL: 203,\n  NU: 204,\n  PM: 205,\n  CK: 206,\n  WF: 207,\n  AS: 208,\n  MH: 209,\n  AW: 210,\n  LI: 211,\n  VG: 212,\n  SH: 213,\n  JE: 214,\n  AI: 215,\n  MF_1_: 216,\n  GG: 217,\n  SM: 218,\n  BM: 219,\n  TV: 220,\n  NR: 221,\n  GI: 222,\n  PN: 223,\n  MC: 224,\n  VA: 225,\n  IM: 226,\n  GU: 227,\n  SG: 228,\n};\n\nexport default colorMap;\n","import countryColorMap from './countryColorMap';\nimport * as THREE from 'three';\nimport { Uniforms } from './types';\nimport findKey from 'lodash/findKey';\n\ninterface CountrySelectParams {\n  scene: THREE.Scene;\n  renderer: THREE.WebGLRenderer;\n  mapUniforms: Uniforms;\n  lookupContext: CanvasRenderingContext2D;\n  lookupTexture: THREE.Texture;\n  camera: THREE.PerspectiveCamera;\n}\n\nclass CountrySelect {\n  private renderer: THREE.WebGLRenderer;\n  private readonly lookupContext: CanvasRenderingContext2D;\n  private readonly camera: THREE.PerspectiveCamera;\n  private lookupTexture: THREE.Texture;\n  private readonly scene: THREE.Scene;\n  private mapUniforms: Uniforms;\n  private colorIndex: number;\n\n  public constructor({\n    scene,\n    renderer,\n    mapUniforms,\n    lookupContext,\n    lookupTexture,\n    camera,\n  }: CountrySelectParams) {\n    this.scene = scene;\n    this.renderer = renderer;\n    this.mapUniforms = mapUniforms;\n    this.lookupContext = lookupContext;\n    this.lookupTexture = lookupTexture;\n    this.camera = camera;\n    this.colorIndex = 0;\n\n    this.highlightOcean();\n  }\n\n  public onCountryClick = (x: number, y: number): void => {\n    this.cleanupContext();\n    let pickedColorIndex = this.getPickColor(x, y);\n\n    if (pickedColorIndex) {\n      this.colorIndex = pickedColorIndex;\n    } else {\n      // if !pickedColorIndex then user clicked on ocean and we shouldn change selected country\n      pickedColorIndex = this.colorIndex;\n    }\n\n    const countryCode = findKey(\n      countryColorMap,\n      (countryColorIndex): boolean => countryColorIndex === pickedColorIndex\n    );\n\n    if (countryCode) {\n      this.highlightCountry(countryCode);\n      this.highlightOcean();\n    }\n  };\n\n  private getPickColor(x: number, y: number): number {\n    this.mapUniforms['outlineLevel'].value = 0;\n\n    this.renderer.clear();\n    this.renderer.render(this.scene, this.camera);\n\n    let gl = this.renderer.context;\n    let canvas = gl.canvas;\n\n    let mouseX = x - canvas.offsetLeft;\n    let mouseY = -y + canvas.height + canvas.offsetTop;\n\n    let buf = new Uint8Array(4);\n    gl.readPixels(mouseX, mouseY, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, buf);\n\n    this.mapUniforms['outlineLevel'].value = 1;\n\n    return buf[0];\n  }\n\n  private cleanupContext(): void {\n    this.lookupContext.clearRect(0, 0, 256, 1);\n    this.lookupTexture.needsUpdate = true;\n  }\n\n  private highlightOcean(): void {\n    let ctx = this.lookupContext;\n    ctx.fillStyle = 'rgb(10,10,10)';\n    ctx.fillRect(0, 0, 1, 1);\n    this.lookupTexture.needsUpdate = true;\n  }\n\n  private highlightCountry(countryCode?: string): void {\n    this.cleanupContext();\n\n    if (countryCode) {\n      let colorIndex = countryColorMap[countryCode];\n\n      let ctx = this.lookupContext;\n\n      ctx.fillStyle = '#eeeeee';\n      ctx.fillRect(colorIndex, 0, 1, 1);\n    }\n\n    this.lookupTexture.needsUpdate = true;\n  }\n}\n\nexport default CountrySelect;\n","import Globe from './Globe';\n\nexport default Globe;\n","import * as THREE from 'three';\nimport Controls from './Controls';\nimport CountrySelect from './CountrySelect';\n\n/* eslint import/no-webpack-loader-syntax: off */\nimport fragmentShader from '!raw-loader!glslify-loader!./fragment.glsl';\n/* eslint import/no-webpack-loader-syntax: off */\nimport vertexShader from '!raw-loader!glslify-loader!./vertex.glsl';\nimport { Uniforms } from './types';\n\ntype RenderFunc = (delta: number, now: number) => void;\n\nconst INDEXED_MAP_IMAGE = 'img/map_indexed.png';\nconst OUTLINED_MAP_IMAGE = 'img/map_outline.png';\n\nconst MAX_ZOOM = 1;\nconst MIN_ZOOM = 4;\n\nclass Globe {\n  private container: HTMLElement;\n  private readonly renderer: THREE.WebGLRenderer;\n  private readonly scene: THREE.Scene;\n  private readonly lookupContext: CanvasRenderingContext2D;\n  private readonly lookupTexture: THREE.Texture;\n  private readonly camera: THREE.PerspectiveCamera;\n  private readonly center: THREE.Vector3;\n  private readonly globe: THREE.Mesh;\n  private readonly mapUniforms: Uniforms;\n\n  public constructor(container: HTMLElement) {\n    this.container = container;\n    this.renderer = Globe.getRenderer(container);\n    this.scene = Globe.getScene();\n    this.camera = Globe.getCamera();\n    this.center = Globe.getCenter();\n    this.camera.lookAt(this.center);\n\n    const ambientLight = Globe.getAmbientLight();\n    this.scene.add(ambientLight);\n\n    const lookupCanvas = Globe.getLookupCanvas();\n    this.lookupContext = Globe.getLookupContext(lookupCanvas);\n    this.lookupTexture = Globe.getLookupTexture(lookupCanvas);\n    this.mapUniforms = Globe.getMapUniforms(this.lookupTexture);\n\n    this.globe = Globe.createGlobe(this.mapUniforms);\n    this.scene.add(this.globe);\n\n    const select = new CountrySelect({\n      scene: this.scene,\n      lookupContext: this.lookupContext,\n      lookupTexture: this.lookupTexture,\n      mapUniforms: this.mapUniforms,\n      renderer: this.renderer,\n      camera: this.camera,\n    });\n\n    new Controls(\n      container,\n      this.drag.bind(this),\n      select.onCountryClick,\n      this.zoomIn.bind(this),\n      this.zoomOut.bind(this)\n    );\n  }\n\n  private static getRenderer(container: HTMLElement): THREE.WebGLRenderer {\n    const renderer = new THREE.WebGLRenderer();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    container.appendChild(renderer.domElement);\n\n    return renderer;\n  }\n\n  private static getScene(): THREE.Scene {\n    return new THREE.Scene();\n  }\n\n  private static getCamera(): THREE.PerspectiveCamera {\n    const camera = new THREE.PerspectiveCamera(\n      45,\n      window.innerWidth / window.innerHeight,\n      0.01,\n      300\n    );\n\n    camera.up = new THREE.Vector3(0, 0, 1);\n    camera.position.x = 2;\n\n    return camera;\n  }\n\n  private static getCenter(): THREE.Vector3 {\n    return new THREE.Vector3();\n  }\n\n  private static getAmbientLight(): THREE.Light {\n    return new THREE.AmbientLight(0xffffff);\n  }\n\n  private static getLookupCanvas(): HTMLCanvasElement {\n    const lookupCanvas = document.createElement('canvas');\n    lookupCanvas.width = 256;\n    lookupCanvas.height = 1;\n    return lookupCanvas;\n  }\n\n  private static getLookupContext(lookupCanvas: HTMLCanvasElement): CanvasRenderingContext2D {\n    const lookupContext = lookupCanvas.getContext('2d');\n    if (!lookupContext) {\n      throw new Error('Lookup context is empty!');\n    }\n    return lookupContext;\n  }\n\n  private static getLookupTexture(lookupCanvas: HTMLCanvasElement): THREE.Texture {\n    const lookupTexture = new THREE.Texture(lookupCanvas);\n    lookupTexture.magFilter = THREE.NearestFilter;\n    lookupTexture.minFilter = THREE.NearestFilter;\n    return lookupTexture;\n  }\n\n  private static getMapUniforms(lookupTexture: THREE.Texture): Uniforms {\n    const loader = new THREE.TextureLoader();\n\n    const mapTexture = loader.load(INDEXED_MAP_IMAGE);\n    mapTexture.magFilter = THREE.NearestFilter;\n    mapTexture.minFilter = THREE.NearestFilter;\n\n    const outlineTexture = loader.load(OUTLINED_MAP_IMAGE);\n\n    return {\n      mapIndex: { type: 't', value: mapTexture },\n      outline: { type: 't', value: outlineTexture },\n      lookup: { type: 't', value: lookupTexture },\n      outlineLevel: { type: 'f', value: 1 },\n    };\n  }\n\n  private static createGlobe(uniforms: Uniforms): THREE.Mesh {\n    const planeMaterial = new THREE.ShaderMaterial({\n      uniforms,\n      vertexShader,\n      fragmentShader,\n    });\n\n    return new THREE.Mesh(\n      new THREE.SphereGeometry(0.5, 32, 32).rotateX(THREE.Math.degToRad(90)),\n      planeMaterial\n    );\n  }\n\n  private drag(deltaX: number, deltaY: number): void {\n    let radPerPixel = Math.PI / 450,\n      deltaPhi = radPerPixel * deltaX,\n      deltaTheta = radPerPixel * deltaY,\n      pos = this.camera.position.sub(this.center),\n      radius = pos.length(),\n      theta = Math.acos(pos.z / radius),\n      phi = Math.atan2(pos.y, pos.x);\n\n    // Subtract deltaTheta and deltaPhi\n    theta = Math.min(Math.max(theta - deltaTheta, 0), Math.PI);\n    phi -= deltaPhi;\n\n    // Turn back into Cartesian coordinates\n    pos.x = radius * Math.sin(theta) * Math.cos(phi);\n    pos.y = radius * Math.sin(theta) * Math.sin(phi);\n    pos.z = radius * Math.cos(theta);\n\n    this.camera.position.add(this.center);\n    this.camera.lookAt(this.center);\n  }\n\n  private zoomIn(): void {\n    if (this.camera.position.length() > MAX_ZOOM) {\n      this.camera.position\n        .sub(this.center)\n        .multiplyScalar(0.95)\n        .add(this.center);\n    }\n  }\n\n  private zoomOut(): void {\n    if (this.camera.position.length() < MIN_ZOOM) {\n      this.camera.position\n        .sub(this.center)\n        .multiplyScalar(1.05)\n        .add(this.center);\n    }\n  }\n\n  public render(): void {\n    const { renderer, globe, scene, camera, container } = this;\n    const renderFuncs: RenderFunc[] = [];\n\n    renderFuncs.push(\n      (delta: number): void => {\n        globe.rotateZ((1 / 32) * delta);\n      }\n    );\n\n    window.addEventListener('resize', function onWindowResize(): void {\n      camera.aspect = container.clientWidth / container.clientHeight;\n      camera.updateProjectionMatrix();\n      renderer.setSize(container.clientWidth, container.clientHeight);\n    });\n\n    renderFuncs.push(\n      (): void => {\n        renderer.render(scene, camera);\n      }\n    );\n\n    let lastTimeMsec: number | null = null;\n    requestAnimationFrame(function animate(nowMsec): void {\n      // measure time\n      lastTimeMsec = lastTimeMsec || nowMsec - 1000 / 60;\n      const deltaMsec = Math.min(200, nowMsec - lastTimeMsec);\n      lastTimeMsec = nowMsec;\n      // call each update\n      renderFuncs.forEach(\n        (renderFunc: RenderFunc): void => {\n          renderFunc(deltaMsec / 1000, nowMsec / 1000);\n        }\n      );\n\n      // keep looping\n      requestAnimationFrame(animate);\n    });\n  }\n}\n\nexport default Globe;\n","export default \"#define GLSLIFY 1\\nvarying vec3 vNormal;\\nvarying vec2 vUv;\\nvoid main()\\n{\\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n    vNormal = normalize(normalMatrix * normal);\\n    vUv = uv;\\n}\\n\"","export default \"#define GLSLIFY 1\\nuniform sampler2D mapIndex;\\nuniform sampler2D lookup;\\nuniform sampler2D outline;\\nuniform float outlineLevel;\\nvarying vec3 vNormal;\\nvarying vec2 vUv;\\nvoid main() {\\n    vec4 mapColor = texture2D(mapIndex, vUv);\\n    float indexedColor = mapColor.x;\\n    vec2 lookupUV = vec2(indexedColor, 0.);\\n    vec4 lookupColor = texture2D(lookup, lookupUV);\\n    float mask = lookupColor.x + (1.-outlineLevel) * indexedColor;\\n    mask = clamp(mask, 0., 1.);\\n    float outlineColor = texture2D(outline, vUv).x * outlineLevel;\\n    float diffuse = mask + outlineColor;\\n    gl_FragColor = vec4(vec3(diffuse), 1.);\\n}\"","import React, { useEffect, useRef, ReactElement, RefObject } from 'react';\nimport style from './app.module.css';\nimport Globe from './components/globe';\n\nfunction useGlobe(): RefObject<HTMLElement> {\n  const threeContainer = useRef<HTMLElement>(null);\n\n  useEffect(\n    (): void => {\n      if (threeContainer.current) {\n        const globe = new Globe(threeContainer.current);\n        globe.render();\n      }\n    }\n  );\n\n  return threeContainer;\n}\n\nfunction App(): ReactElement {\n  const threeContainer = useGlobe();\n\n  return (\n    <div className={style.app}>\n      <header className={style.appHeader}>CLEAN PLANET</header>\n      <main className={style.threeContainer} ref={threeContainer} />\n      <footer>Â© Anton Chernov 2019</footer>\n    </div>\n  );\n}\n\nexport default App;\n","/* eslint-disable */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ninterface Config {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n}\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"app_app__32yr0\",\"appHeader\":\"app_appHeader__3VOiX\",\"threeContainer\":\"app_threeContainer__2hjE3\"};"],"sourceRoot":""}